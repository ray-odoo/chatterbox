<?xml version="1.0" encoding="UTF-8"?>
<templates>

    <t t-name="Planning.event.popover" t-extend="CalendarView.event.popover">
        <t t-jquery='small[t-if="widget.eventTime.duration"]' t-operation="replace">
            <small t-if="widget.allocated_hours">
                <b t-esc="_.str.sprintf('(%s)', widget.allocated_hours)"/>
            </small>
            <small t-if="widget.allocated_percentage and widget.resource_type == 'user'">
                <b t-esc="_.str.sprintf('(%s %s)', widget.allocated_percentage, '%')"/>
            </small>
            <small t-if="widget.eventTime.duration and !(widget.allocated_hours or widget.allocated_percentage)">
                <b t-esc="_.str.sprintf('(%s)', widget.eventTime.duration)"/>
            </small>
        </t>
    </t>

    <t t-name="Planning.CalendarView.extend" t-extend="CalendarView">
        <t t-jquery='.o_calendar_sidebar_container' t-operation="append">
            <t t-if="widget.is_manager" class="o_planning_legend">
                <h5>Legend</h5>
                <img src="/hr/static/src/img/icons/plain.svg" width="30px" class="mb-1"/><span>Published</span><br/>
                <img src="/hr/static/src/img/icons/hatched.svg" width="30px" class="mb-1"/><span>Draft</span><br/>
            </t>
        </t>
    </t>

    <t t-name="planning.calendar.button">
        <t t-if="activeActions &amp;&amp; activeActions.edit">
            <button t-if="activeActions.create &amp;&amp; activeScale === 'week'" class="btn btn-primary o_button_copy_previous_week" title="Copy previous week">
                Copy previous
            </button>
            <button t-if="activeScale !== 'year'" class="btn btn-primary o_button_send_all" title="Send schedule">
                Publish
            </button>
        </t>
    </t>

</templates>
