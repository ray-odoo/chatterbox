<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="hr_employee_public_view_form" model="ir.ui.view">
            <field name="name">hr.employee.public.view.form.inherit.hr.homeworking</field>
            <field name="model">hr.employee.public</field>
            <field name="inherit_id" ref="hr.hr_employee_public_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//page[@name='public']" position="after">
                    <page name="homeworking" string="Homeworking">
                        <field name="has_active_department_schedules" invisible="1"/>
                        <label for="has_specific_homeworking_policy"/>
                        <field name="has_specific_homeworking_policy" readonly="1"/>

                        <span attrs="{'invisible': [('has_specific_homeworking_policy', '=', True)]}">
                            <group>
                                <label for="homeworking_department_schedule_ids"/>
                            </group>
                            <field attrs="{'invisible': [('has_active_department_schedules', '=', False)]}"
                                name="homeworking_department_schedule_ids"/>
                            <group attrs="{'invisible': [('has_active_department_schedules', '=', True)]}">
                                <span>
                                    No schedule set on the department
                                </span>
                            </group>
                        </span>
                        <span attrs="{'invisible': [('has_specific_homeworking_policy', '=', False)]}">
                            <label for="homeworking_schedule_ids" string="Personal Schedules"/>
                            <field name="homeworking_schedule_ids"/>
                        </span>
                        <label for="homeworking_exception_ids" string="Exceptions"/>
                        <field name="homeworking_exception_ids"/>
                    </page>
                </xpath>
            </field>
        </record>

        <record id="hr_employee_public_view_form" model="ir.ui.view">
            <field name="name">hr.employee.public.view.form.inherit.hr.homeworking</field>
            <field name="model">hr.employee.public</field>
            <field name="inherit_id" ref="hr.hr_employee_public_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='parent_id']" position="after">
                    <field name="homeworking_current_location_id" optional="show"/>
                </xpath>
            </field>
        </record>

        <record id="hr_employee_public_view_kanban" model="ir.ui.view">
            <field name="name">hr.employee.public.view.kanban.inherit.hr.homeworking</field>
            <field name="model">hr.employee.public</field>
            <field name="inherit_id" ref="hr.hr_employee_public_view_kanban"/>
            <field name="arch" type="xml">
                <xpath expr="//strong[hasclass('o_kanban_record_title')]" position="inside"
                       t-if="record.show_hr_icon_display.raw_value">
                    <div class="float-end"
                         t-if="record.hr_icon_display.raw_value == 'presence_present_home'">
                        <span class="fa fa-home text-success o-homeworking-status-icon" role="img" aria-label="Present (home)"
                              title="Present (home)" name="presence_present_home">
                        </span>
                    </div>
                    <div class="float-end"
                         t-if="record.hr_icon_display.raw_value == 'presence_present_office'">
                        <span class="fa fa-building text-success o-homeworking-status-icon" role="img" aria-label="Present (office)"
                              title="Present (office)" name="presence_present_office">
                        </span>
                    </div>
                    <div class="float-end"
                         t-if="record.hr_icon_display.raw_value == 'presence_present_unspecified'">
                        <span class="fa fa-question-circle-o text-success o-homeworking-status-icon" role="img" aria-label="Present (unspecified working location)"
                              title="Present (unspecified working location)" name="presence_present_unspecified">
                        </span>
                    </div>
                    <div class="float-end"
                         t-if="record.hr_icon_display.raw_value == 'presence_to_define_home'">
                        <span class="fa fa-home text-warning o-homeworking-status-icon" role="img" aria-label="To define (home)"
                              title="To define (home)" name="presence_to_define_home">
                        </span>
                    </div>
                    <div class="float-end"
                         t-if="record.hr_icon_display.raw_value == 'presence_to_define_office'">
                        <span class="fa fa-building text-warning o-homeworking-status-icon" role="img" aria-label="To define (office)"
                              title="To define (office)" name="presence_to_define_office">
                        </span>
                    </div>
                    <div class="float-end"
                         t-if="record.hr_icon_display.raw_value == 'presence_to_define_unspecified'">
                        <span class="fa fa-question-circle-o text-warning o-homeworking-status-icon" 
                              role="img" aria-label="To define (unspecified working location)"
                              title="To define (unspecified working location)" name="presence_to_define_unspecified">
                        </span>
                    </div>
                </xpath>
            </field>
        </record>

        <record id="hr_employee_public_view_search" model="ir.ui.view">
            <field name="name">hr.employee.search.inherit.homeworking</field>
            <field name="model">hr.employee.public</field>
            <field name="inherit_id" ref="hr.hr_employee_public_view_search"/>
            <field name="arch" type="xml">
                <xpath expr="//filter[@name='archived']" position="before">
                    <filter name="homeworking_location_home" string="Working from Home"
                            domain="[('homeworking_current_location_id.location_type', '=', 'home')]"/>
                    <filter name="homeworking_location_office" string="Working in the Office"
                            domain="[('homeworking_current_location_id.location_type', '=', 'office')]"/>
                    <filter name="homeworking_location_unspecified" string="Homeworking Unspecified"
                            domain="[('homeworking_current_location_id.location_type', '=', 'unspecified')]"/>
                    <separator/>
                </xpath>
            </field>
        </record>
    </data>
</odoo>
